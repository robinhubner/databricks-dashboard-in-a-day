resources:
  jobs:
    sunny_bay_roastery_job:
      name: sunny_bay_roastery
      trigger:
        periodic:
          interval: 1
          unit: DAYS

      tasks:
        - task_key: init_bronze_data
          environment_key: default
          notebook_task:
            notebook_path: ../src/bronze/main.ipynb
            base_parameters:
              catalog: ${var.catalog}

        - task_key: run_pipeline
          depends_on:
            - task_key: init_bronze_data
          pipeline_task:
            pipeline_id: ${resources.pipelines.sunny_bay_roastery_pipeline.id}

      environments:
        - environment_key: default
          spec:
            environment_version: "4"
